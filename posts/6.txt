1:HL["/_next/static/media/710e6adf42e8fe6f-s.p.woff2",{"as":"font","type":"font/woff2"}]
2:HL["/_next/static/media/7b379c56c483b024-s.p.woff2",{"as":"font","type":"font/woff2"}]
3:HL["/_next/static/media/7b9ca6a1d31c5662-s.p.woff2",{"as":"font","type":"font/woff2"}]
4:HL["/_next/static/media/931105f8d96e7f26-s.p.woff2",{"as":"font","type":"font/woff2"}]
5:HL["/_next/static/media/d9957a565b52891d-s.p.woff2",{"as":"font","type":"font/woff2"}]
6:HL["/_next/static/media/fbdbe464b9e5cc95-s.p.woff2",{"as":"font","type":"font/woff2"}]
7:HL["/_next/static/css/da46ff90c46166be.css",{"as":"style"}]
0:["vHjgv7TG_6lUCDXNOgE2T",[[["",{"children":["posts",{"children":[["slug","6","d"],{"children":["__PAGE__?{\"slug\":\"6\"}",{}]}]}]},"$undefined","$undefined",true],"$L8",[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/da46ff90c46166be.css","precedence":"next"}]],["$L9",["$","meta",null,{"name":"next-size-adjust"}]]]]]]
a:HL["/_next/static/media/1060bab20f18b5c2-s.p.woff2",{"as":"font","type":"font/woff2"}]
b:HL["/_next/static/css/ca4b413b104171a1.css",{"as":"style"}]
c:HL["/_next/static/css/01cb1f6bc3109902.css",{"as":"style"}]
d:I{"id":7095,"chunks":["95:static/chunks/95-072377135f6d2de2.js","333:static/chunks/app/posts/[slug]/page-f66cb93eb7e955ba.js"],"name":"","async":false}
e:I{"id":9180,"chunks":["272:static/chunks/webpack-cbdadafe7f767bfb.js","253:static/chunks/bce60fc1-ace986fa93a43fca.js","698:static/chunks/698-2449c10902a17a12.js"],"name":"default","async":false}
f:I{"id":2306,"chunks":["272:static/chunks/webpack-cbdadafe7f767bfb.js","253:static/chunks/bce60fc1-ace986fa93a43fca.js","698:static/chunks/698-2449c10902a17a12.js"],"name":"default","async":false}
8:[["$","html",null,{"lang":"en","children":["$","body",null,{"style":{"marginLeft":"auto","marginRight":"auto","maxWidth":"49rem","padding":"0px 1.3125rem"},"className":"__className_135483","children":[["$","nav",null,{"className":"Navbar_navbar__fk_p7","children":[["$","$Ld",null,{"href":"/","children":" Home "}],["$","$Ld",null,{"href":"/about","children":" About "}]]}],["$","main",null,{"className":"Layout_main__luTTh","children":["$","$Le",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$Lf",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$","$Le",null,{"parallelRouterKey":"children","segmentPath":["children","posts","children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$Lf",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$","$Le",null,{"parallelRouterKey":"children","segmentPath":["children","posts","children",["slug","6","d"],"children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$Lf",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$L10",null],"segment":"__PAGE__?{\"slug\":\"6\"}"},"styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/ca4b413b104171a1.css","precedence":"next"}],["$","link","1",{"rel":"stylesheet","href":"/_next/static/css/01cb1f6bc3109902.css","precedence":"next"}]]}],"segment":["slug","6","d"]},"styles":[]}],"segment":"posts"},"styles":[]}]}],["$","footer",null,{"className":"Layout_footer__U3vTh","children":[["$","hr",null,{}],["$","small",null,{"children":["© ",2023," Ken Bi. Powered by"," ",["$","a",null,{"href":"https://github.com/bpceee/isblog","rel":"noopener noreferrer","target":"_blank","children":"isBlog"}]]}]]}]]}]}],null]
9:[["$","meta","0",{"charSet":"utf-8"}],["$","title","1",{"children":"Create Next App"}],["$","meta","2",{"name":"description","content":"Generated by create next app"}],["$","meta","3",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","link","4",{"rel":"icon","href":"/favicon.ico","type":"image/x-icon","sizes":"any"}]]
12:I{"id":5282,"chunks":["95:static/chunks/95-072377135f6d2de2.js","333:static/chunks/app/posts/[slug]/page-f66cb93eb7e955ba.js"],"name":"Utterance","async":false}
11:Tf6c,<html><head></head><body><p dir="auto">Code splitting for dynamic import is great. However, incremental build spend much more time if there are too many chunks to split. So it would be perfect if we use eager mode for development and lazy mode for production.</p>
<p dir="auto">Bad news: right now, you can only set webpackMode per import expression like this:</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="import(
  /* webpackMode: &quot;lazy&quot; */
  'module'
);"><pre class="notranslate"><span class="pl-k">import</span><span class="pl-kos">(</span>
  <span class="pl-c">/* webpackMode: "lazy" */</span>
  <span class="pl-s">'module'</span>
<span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<p dir="auto">First try:</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="if (process.env.NODE_ENV === 'production') {
  import(
    /* webpackMode: &quot;lazy&quot; */
    'module'
  );
} else {
  import(
    /* webpackMode: &quot;eager&quot; */
    'module'
  );
}"><pre class="notranslate"><span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-s1">process</span><span class="pl-kos">.</span><span class="pl-c1">env</span><span class="pl-kos">.</span><span class="pl-c1">NODE_ENV</span> <span class="pl-c1">===</span> <span class="pl-s">'production'</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
  <span class="pl-k">import</span><span class="pl-kos">(</span>
    <span class="pl-c">/* webpackMode: "lazy" */</span>
    <span class="pl-s">'module'</span>
  <span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-kos">}</span> <span class="pl-k">else</span> <span class="pl-kos">{</span>
  <span class="pl-k">import</span><span class="pl-kos">(</span>
    <span class="pl-c">/* webpackMode: "eager" */</span>
    <span class="pl-s">'module'</span>
  <span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-kos">}</span></pre></div>
<p dir="auto">Turn out, this just getting worse. Clearly the bundler doesn't respect <code class="notranslate">process.env.NODE_ENV</code> here.</p>
<p dir="auto">Workaround:<br>
Using NormalModuleReplacementPlugin to load different file in different env.</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="new webpack.NormalModuleReplacementPlugin(/\.\/lazy-load-import$/, function(resource) {
  resource.request = resource.request.replace(/lazy/, 'eager');
})"><pre class="notranslate"><span class="pl-k">new</span> <span class="pl-s1">webpack</span><span class="pl-kos">.</span><span class="pl-c1">NormalModuleReplacementPlugin</span><span class="pl-kos">(</span><span class="pl-pds"><span class="pl-c1">/</span><span class="pl-cce">\.</span><span class="pl-cce">\/</span>lazy-load-import<span class="pl-cce">$</span><span class="pl-c1">/</span></span><span class="pl-kos">,</span> <span class="pl-k">function</span><span class="pl-kos">(</span><span class="pl-s1">resource</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
  <span class="pl-s1">resource</span><span class="pl-kos">.</span><span class="pl-c1">request</span> <span class="pl-c1">=</span> <span class="pl-s1">resource</span><span class="pl-kos">.</span><span class="pl-c1">request</span><span class="pl-kos">.</span><span class="pl-en">replace</span><span class="pl-kos">(</span><span class="pl-pds"><span class="pl-c1">/</span>lazy<span class="pl-c1">/</span></span><span class="pl-kos">,</span> <span class="pl-s">'eager'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span></pre></div>
<p dir="auto">Then put different logic in lazy-load-import.js and eager-load-import.js</p></body></html>10:["$","article",null,{"className":"Post_blogPost__gpu0n","children":[["$","header",null,{"children":[["$","h1",null,{"className":"__className_cabfd8","children":"Disable dynamic import code splitting"}],["$","p",null,{"className":"Post_meta__oz6mK","children":["Published ",["$","span",null,{"children":"12 Dec 2018"}],[" ","· tagged with",[[" ",["$","$Ld","0",{"className":"PostTags_tag__ommYO","href":"?tag=webpack","children":"webpack"}]]]]]}]]}],["$","div",null,{"className":"markdown-body","dangerouslySetInnerHTML":{"__html":"$11"}}],["$","$L12",null,{"postId":6}]]}]
