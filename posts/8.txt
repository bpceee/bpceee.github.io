1:HL["/_next/static/media/710e6adf42e8fe6f-s.p.woff2",{"as":"font","type":"font/woff2"}]
2:HL["/_next/static/media/7b379c56c483b024-s.p.woff2",{"as":"font","type":"font/woff2"}]
3:HL["/_next/static/media/7b9ca6a1d31c5662-s.p.woff2",{"as":"font","type":"font/woff2"}]
4:HL["/_next/static/media/931105f8d96e7f26-s.p.woff2",{"as":"font","type":"font/woff2"}]
5:HL["/_next/static/media/d9957a565b52891d-s.p.woff2",{"as":"font","type":"font/woff2"}]
6:HL["/_next/static/media/fbdbe464b9e5cc95-s.p.woff2",{"as":"font","type":"font/woff2"}]
7:HL["/_next/static/css/02482d46f001465e.css",{"as":"style"}]
0:["Xi8j4xS6jEhZxxKYM3-G2",[[["",{"children":["posts",{"children":[["slug","8","d"],{"children":["__PAGE__?{\"slug\":\"8\"}",{}]}]}]},"$undefined","$undefined",true],"$L8",[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/02482d46f001465e.css","precedence":"next"}]],["$L9",["$","meta",null,{"name":"next-size-adjust"}]]]]]]
a:HL["/_next/static/media/1060bab20f18b5c2-s.p.woff2",{"as":"font","type":"font/woff2"}]
b:HL["/_next/static/css/ca4b413b104171a1.css",{"as":"style"}]
c:HL["/_next/static/css/2ec2d810ee62b2fc.css",{"as":"style"}]
d:I{"id":7095,"chunks":["95:static/chunks/95-072377135f6d2de2.js","333:static/chunks/app/posts/[slug]/page-1873478ed3c0f1d0.js"],"name":"","async":false}
e:I{"id":9180,"chunks":["272:static/chunks/webpack-60e2e3ac064dc981.js","253:static/chunks/bce60fc1-ace986fa93a43fca.js","698:static/chunks/698-2449c10902a17a12.js"],"name":"default","async":false}
f:I{"id":2306,"chunks":["272:static/chunks/webpack-60e2e3ac064dc981.js","253:static/chunks/bce60fc1-ace986fa93a43fca.js","698:static/chunks/698-2449c10902a17a12.js"],"name":"default","async":false}
11:I{"id":7676,"chunks":["95:static/chunks/95-072377135f6d2de2.js","185:static/chunks/app/layout-64f6b090900884aa.js"],"name":"","async":false}
8:[["$","html",null,{"lang":"en","children":[["$","body",null,{"style":{"marginLeft":"auto","marginRight":"auto","maxWidth":"49rem","padding":"0px 1.3125rem"},"className":"__className_135483","children":[["$","nav",null,{"className":"Navbar_navbar__fk_p7","children":[["$","$Ld",null,{"href":"/","children":" Home "}],["$","$Ld",null,{"href":"/about","children":" About "}]]}],["$","main",null,{"className":"Layout_main__luTTh","children":["$","$Le",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$Lf",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$","$Le",null,{"parallelRouterKey":"children","segmentPath":["children","posts","children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$Lf",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$","$Le",null,{"parallelRouterKey":"children","segmentPath":["children","posts","children",["slug","8","d"],"children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$Lf",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$L10",null],"segment":"__PAGE__?{\"slug\":\"8\"}"},"styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/ca4b413b104171a1.css","precedence":"next"}],["$","link","1",{"rel":"stylesheet","href":"/_next/static/css/2ec2d810ee62b2fc.css","precedence":"next"}]]}],"segment":["slug","8","d"]},"styles":[]}],"segment":"posts"},"styles":[]}]}],["$","footer",null,{"className":"Layout_footer__U3vTh","children":[["$","hr",null,{}],["$","small",null,{"children":["© ",2023," Ken Bi. Powered by"," ",["$","a",null,{"href":"https://github.com/bpceee/isblog","rel":"noopener noreferrer","target":"_blank","children":"isBlog"}]]}]]}]]}],["$","$L11",null,{"async":true,"src":"https://www.googletagmanager.com/gtag/js?id=G-S7F2NX4DHC"}],["$","$L11",null,{"id":"google-analytics","children":"\n          window.dataLayer = window.dataLayer || [];\n          function gtag(){dataLayer.push(arguments);}\n          gtag('js', new Date());\n        \n          gtag('config', 'G-S7F2NX4DHC');\n        "}]]}],null]
9:[["$","meta","0",{"charSet":"utf-8"}],["$","title","1",{"children":"A bizarre pitfall when converting CommonJS to ES6 module"}],["$","meta","2",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","link","3",{"rel":"icon","href":"/favicon.ico","type":"image/x-icon","sizes":"any"}]]
13:I{"id":5282,"chunks":["95:static/chunks/95-072377135f6d2de2.js","333:static/chunks/app/posts/[slug]/page-1873478ed3c0f1d0.js"],"name":"Utterance","async":false}
12:T8c0,<html><head></head><body><p dir="auto">Well, it wouldn't be bizarre if you really know inside out of Webpack and ES6 module..</p>
<p dir="auto">As we all know, <a class="user-mention notranslate" data-hovercard-type="organization" data-hovercard-url="/orgs/font-face/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/font-face">@font-face</a> defined in css will trigger a http request for the font file based on the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/filter-function/url" rel="nofollow">url() CSS function</a>. However, after updated to ES6 module, the url somehow doesn't value the <code class="notranslate">__webpack_public_path__</code> set in the entry point <code class="notranslate">app.ts</code>. Thus, many failed font requests.</p>
<p dir="auto">Well, the reason is that import statements are always hoisted in es6 module, so the <code class="notranslate">__webpack_public_path__</code> initialization in the first line of <code class="notranslate">app.ts</code> didn't have any effects in those hoisted import statements including the <code class="notranslate">css</code> file. So, after putting the <code class="notranslate">__webpack_public_path__</code> initialization into a separation file and get it imported into app.ts, problem resolved!</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// app.ts
import &quot;./public-path&quot;;
import &quot;./index.css&quot;;"><pre class="notranslate"><span class="pl-c">// app.ts</span>
<span class="pl-k">import</span> <span class="pl-s">"./public-path"</span><span class="pl-kos">;</span>
<span class="pl-k">import</span> <span class="pl-s">"./index.css"</span><span class="pl-kos">;</span></pre></div>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// public-path.ts
__webpack_public_path__ = &quot;...&quot;"><pre class="notranslate"><span class="pl-c">// public-path.ts</span>
<span class="pl-s1">__webpack_public_path__</span> <span class="pl-c1">=</span> <span class="pl-s">"..."</span></pre></div></body></html>10:["$","article",null,{"className":"Post_blogPost__gpu0n","children":[["$","header",null,{"children":[["$","h1",null,{"className":"__className_cabfd8","children":"A bizarre pitfall when converting CommonJS to ES6 module"}],["$","p",null,{"className":"Post_meta__oz6mK","children":["Published ",["$","span",null,{"className":"$undefined","children":"30 Jan 2019"}],[" ","· tagged with",[[" ",["$","$Ld","0",{"className":"PostTags_tag__ommYO","href":"?tag=webpack","children":"webpack"}]]]]]}]]}],["$","div",null,{"className":"markdown-body","dangerouslySetInnerHTML":{"__html":"$12"}}],["$","$L13",null,{"postId":8}],false]}]
