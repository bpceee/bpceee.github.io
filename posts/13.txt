1:HL["/_next/static/media/710e6adf42e8fe6f-s.p.woff2",{"as":"font","type":"font/woff2"}]
2:HL["/_next/static/media/7b379c56c483b024-s.p.woff2",{"as":"font","type":"font/woff2"}]
3:HL["/_next/static/media/7b9ca6a1d31c5662-s.p.woff2",{"as":"font","type":"font/woff2"}]
4:HL["/_next/static/media/931105f8d96e7f26-s.p.woff2",{"as":"font","type":"font/woff2"}]
5:HL["/_next/static/media/d9957a565b52891d-s.p.woff2",{"as":"font","type":"font/woff2"}]
6:HL["/_next/static/media/fbdbe464b9e5cc95-s.p.woff2",{"as":"font","type":"font/woff2"}]
7:HL["/_next/static/css/02482d46f001465e.css",{"as":"style"}]
0:["Xi8j4xS6jEhZxxKYM3-G2",[[["",{"children":["posts",{"children":[["slug","13","d"],{"children":["__PAGE__?{\"slug\":\"13\"}",{}]}]}]},"$undefined","$undefined",true],"$L8",[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/02482d46f001465e.css","precedence":"next"}]],["$L9",["$","meta",null,{"name":"next-size-adjust"}]]]]]]
a:HL["/_next/static/media/1060bab20f18b5c2-s.p.woff2",{"as":"font","type":"font/woff2"}]
b:HL["/_next/static/css/ca4b413b104171a1.css",{"as":"style"}]
c:HL["/_next/static/css/2ec2d810ee62b2fc.css",{"as":"style"}]
d:I{"id":7095,"chunks":["95:static/chunks/95-072377135f6d2de2.js","333:static/chunks/app/posts/[slug]/page-1873478ed3c0f1d0.js"],"name":"","async":false}
e:I{"id":9180,"chunks":["272:static/chunks/webpack-60e2e3ac064dc981.js","253:static/chunks/bce60fc1-ace986fa93a43fca.js","698:static/chunks/698-2449c10902a17a12.js"],"name":"default","async":false}
f:I{"id":2306,"chunks":["272:static/chunks/webpack-60e2e3ac064dc981.js","253:static/chunks/bce60fc1-ace986fa93a43fca.js","698:static/chunks/698-2449c10902a17a12.js"],"name":"default","async":false}
11:I{"id":7676,"chunks":["95:static/chunks/95-072377135f6d2de2.js","185:static/chunks/app/layout-64f6b090900884aa.js"],"name":"","async":false}
8:[["$","html",null,{"lang":"en","children":[["$","body",null,{"style":{"marginLeft":"auto","marginRight":"auto","maxWidth":"49rem","padding":"0px 1.3125rem"},"className":"__className_135483","children":[["$","nav",null,{"className":"Navbar_navbar__fk_p7","children":[["$","$Ld",null,{"href":"/","children":" Home "}],["$","$Ld",null,{"href":"/about","children":" About "}]]}],["$","main",null,{"className":"Layout_main__luTTh","children":["$","$Le",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$Lf",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$","$Le",null,{"parallelRouterKey":"children","segmentPath":["children","posts","children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$Lf",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$","$Le",null,{"parallelRouterKey":"children","segmentPath":["children","posts","children",["slug","13","d"],"children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$Lf",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$L10",null],"segment":"__PAGE__?{\"slug\":\"13\"}"},"styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/ca4b413b104171a1.css","precedence":"next"}],["$","link","1",{"rel":"stylesheet","href":"/_next/static/css/2ec2d810ee62b2fc.css","precedence":"next"}]]}],"segment":["slug","13","d"]},"styles":[]}],"segment":"posts"},"styles":[]}]}],["$","footer",null,{"className":"Layout_footer__U3vTh","children":[["$","hr",null,{}],["$","small",null,{"children":["© ",2023," Ken Bi. Powered by"," ",["$","a",null,{"href":"https://github.com/bpceee/isblog","rel":"noopener noreferrer","target":"_blank","children":"isBlog"}]]}]]}]]}],["$","$L11",null,{"async":true,"src":"https://www.googletagmanager.com/gtag/js?id=G-S7F2NX4DHC"}],["$","$L11",null,{"id":"google-analytics","children":"\n          window.dataLayer = window.dataLayer || [];\n          function gtag(){dataLayer.push(arguments);}\n          gtag('js', new Date());\n        \n          gtag('config', 'G-S7F2NX4DHC');\n        "}]]}],null]
9:[["$","meta","0",{"charSet":"utf-8"}],["$","title","1",{"children":"Analysis on a vertical alignment issue in CSS"}],["$","meta","2",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","link","3",{"rel":"icon","href":"/favicon.ico","type":"image/x-icon","sizes":"any"}]]
13:I{"id":5282,"chunks":["95:static/chunks/95-072377135f6d2de2.js","333:static/chunks/app/posts/[slug]/page-1873478ed3c0f1d0.js"],"name":"Utterance","async":false}
14:I{"id":3926,"chunks":["95:static/chunks/95-072377135f6d2de2.js","333:static/chunks/app/posts/[slug]/page-1873478ed3c0f1d0.js"],"name":"CodePenScript","async":false}
12:T1e37,<html><head></head><body><p dir="auto">So I came across <a href="https://www.aha.io/engineering/articles/css-is-hard-no-matter-how-good-you-are-at-it" rel="nofollow">this blog post</a> when browsing Aha!'s engineering blog. The acknowledgement that CSS is challenging and the methodically structured approach they are taking to address the problem resonates with me.</p>
<p dir="auto">At the end of the article, it states, "If you know the reason or have a different solution, we would love to hear from you." So, here I am, attempting to find a reason and perhaps offer a different solution.</p>
<h2 dir="auto">The Problem</h2>
<p dir="auto">An <code class="notranslate">img</code> tag causing misalignment.</p>
<p dir="auto"><div>
      <p class="codepen" data-height="300" data-default-tab="html,result" data-slug-hash="rNrPYNQ" data-user="jsteel64" style="height: 300px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;">
        <a href="">Refresh page to view</a>
        <span>&nbsp;or&nbsp;</span> 
        <a href="https://codepen.io/jsteel64/pen/rNrPYNQ">
          View on CodePen
        </a>.
      </p>
      </div></p>
<h2 dir="auto">The Cause</h2>
<p dir="auto">After some sandboxing and googling around, it appears the issue is related to <a href="https://www.w3.org/TR/css-inline-3/#alignment" rel="nofollow">baseline alignment</a>. By examining the DOM tree structure, we can divide it into two parts: the alignment of the two inline-box <code class="notranslate">pill</code> span elements and the <a href="https://www.w3.org/TR/css-align-3/#baseline-export" rel="nofollow">determination of the baseline</a> for the <code class="notranslate">wrapper</code> flex container.</p>
<h3 dir="auto">1. Inline box baseline alignment</h3>
<p dir="auto">According to w3 document for <a href="https://www.w3.org/TR/css-inline-3/#alignment" rel="nofollow">baseline alignment</a>:</p>
<blockquote>
<p dir="auto">While most CSS&nbsp;<a href="https://www.w3.org/TR/css-display-3/#formatting-context" rel="nofollow">formatting contexts</a>&nbsp;position content by aligning boxes with respect to their container’s edges,&nbsp;<strong><a href="https://www.w3.org/TR/css-inline-3/#inline-layout" rel="nofollow">inline layout</a>&nbsp;positions boxes in the&nbsp;<a href="https://www.w3.org/TR/css-writing-modes-4/#block-axis" rel="nofollow">block axis</a> by aligning them with respect to each other using their&nbsp;<a href="https://www.w3.org/TR/css-inline-3/#baseline" rel="nofollow">baselines</a>.</strong></p>
</blockquote>
<p dir="auto">A very clear example from here: <a href="https://infoheap.com/css-inline-block-baseline-alignment/" rel="nofollow">https://infoheap.com/css-inline-block-baseline-alignment/</a></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://user-images.githubusercontent.com/4188573/252216999-dff44aed-85b0-4c73-8c69-f94abe95b165.png"><img src="https://user-images.githubusercontent.com/4188573/252216999-dff44aed-85b0-4c73-8c69-f94abe95b165.png" alt="image" style="max-width: 100%;"></a></p>
<p dir="auto"><div>
      <p class="codepen" data-height="300" data-default-tab="html,result" data-slug-hash="QWJOLbm" data-user="bpceee-the-typescripter" style="height: 300px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;">
        <a href="">Refresh page to view</a>
        <span>&nbsp;or&nbsp;</span> 
        <a href="https://codepen.io/bpceee-the-typescripter/pen/QWJOLbm">
          View on CodePen
        </a>.
      </p>
      </div></p>
<a target="_blank" rel="noopener noreferrer" href="https://user-images.githubusercontent.com/4188573/252217132-578b4431-f721-4bd9-8ef3-7b6af72a81f9.png"><img src="https://user-images.githubusercontent.com/4188573/252217132-578b4431-f721-4bd9-8ef3-7b6af72a81f9.png" width="300" style="max-width: 100%;"></a>
<p dir="auto">So back to our problem, the “Pill 2”’s baseline somehow lies on <code class="notranslate">img</code> tag. But why?</p>
<h3 dir="auto">2. <strong>Determining f</strong>lex container baseline</h3>
<p dir="auto">Understanding related rules in w3 is quite challenging: <a href="https://www.w3.org/TR/css-flexbox-1/#flex-baselines" rel="nofollow">https://www.w3.org/TR/css-flexbox-1/#flex-baselines</a></p>
<p dir="auto">A plausible(wild) guess would be that it falls in to the second rule:</p>
<blockquote>
<p dir="auto">if the flex container has at least one&nbsp;<a href="https://www.w3.org/TR/css-flexbox-1/#flex-item" rel="nofollow">flex item</a>, the flex container’s first/last&nbsp;<a href="https://www.w3.org/TR/css-flexbox-1/#main-axis-baseline" rel="nofollow">main-axis baseline set</a>&nbsp;is&nbsp;<a href="https://www.w3.org/TR/css3-align/#generate-baselines" rel="nofollow">generated</a>&nbsp;from the&nbsp;<a href="https://www.w3.org/TR/css3-align/#alignment-baseline" rel="nofollow">alignment baseline</a>&nbsp;of the startmost/endmost&nbsp;<a href="https://www.w3.org/TR/css-flexbox-1/#flex-item" rel="nofollow">flex item</a>.</p>
</blockquote>
<p dir="auto">So in the original problem, the alignment baseline of the flexbox container corresponds to the alignment baseline of the first flex item, which is the <code class="notranslate">img</code> alignment baseline.</p>
<p dir="auto">Here is an example where the first element is bigger than the second:</p>
<p dir="auto"><div>
      <p class="codepen" data-height="300" data-default-tab="html,result" data-slug-hash="yLQPBXG" data-user="bpceee-the-typescripter" style="height: 300px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;">
        <a href="">Refresh page to view</a>
        <span>&nbsp;or&nbsp;</span> 
        <a href="https://codepen.io/bpceee-the-typescripter/pen/yLQPBXG">
          View on CodePen
        </a>.
      </p>
      </div></p>
<p dir="auto">The solution in the original blog post works because it adds a zero width space first child, which has a same height as the second child since they have the same default font size.</p>
<p dir="auto">But what if they don’t have the same height?</p>
<p dir="auto"><div>
      <p class="codepen" data-height="300" data-default-tab="html,result" data-slug-hash="KKryPvG" data-user="bpceee-the-typescripter" style="height: 300px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;">
        <a href="">Refresh page to view</a>
        <span>&nbsp;or&nbsp;</span> 
        <a href="https://codepen.io/bpceee-the-typescripter/pen/KKryPvG">
          View on CodePen
        </a>.
      </p>
      </div></p>
<p dir="auto">Here, text in <code class="notranslate">span</code> are set to 32px explicitly, but the content in the pseudo element is still default to 16px. Boom, misaligned again.</p>
<h2 dir="auto">Alternative solution</h2>
<p dir="auto">Wrap them around a flexbox container.</p>
<p dir="auto"><div>
      <p class="codepen" data-height="300" data-default-tab="html,result" data-slug-hash="wvQPwyj" data-user="bpceee-the-typescripter" style="height: 300px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;">
        <a href="">Refresh page to view</a>
        <span>&nbsp;or&nbsp;</span> 
        <a href="https://codepen.io/bpceee-the-typescripter/pen/wvQPwyj">
          View on CodePen
        </a>.
      </p>
      </div></p>
<p dir="auto">But yeah, it’s might not be suitable to make such change in a large codebase.</p></body></html>10:["$","article",null,{"className":"Post_blogPost__gpu0n","children":[["$","header",null,{"children":[["$","h1",null,{"className":"__className_cabfd8","children":"Analysis on a vertical alignment issue in CSS"}],["$","p",null,{"className":"Post_meta__oz6mK","children":["Published ",["$","span",null,{"className":"$undefined","children":"10 Jul 2023"}],[" ","· tagged with",[[" ",["$","$Ld","0",{"className":"PostTags_tag__ommYO","href":"?tag=css","children":"css"}]]]]]}]]}],["$","div",null,{"className":"markdown-body","dangerouslySetInnerHTML":{"__html":"$12"}}],["$","$L13",null,{"postId":13}],["$","$L14",null,{}]]}]
